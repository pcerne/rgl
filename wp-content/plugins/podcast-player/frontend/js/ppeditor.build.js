!function(){"use strict";var t=window.podcastPlayerData||{},e={podcastPlayerData:jQuery.extend(!0,{},t),isStyleSupport:function(t,e){var s=window.ppmejsSettings.stSup||!1;return!(!s||!t)&&s[t].includes(e)}};function s(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var i=function(){function t(s){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(i="resizeTimeout")in this?Object.defineProperty(this,i,{value:null,enumerable:!0,configurable:!0,writable:!0}):this[i]=null,this.id=s,this.podcast=e[s].podcast,this.menuToggle=this.podcast.find(".pod-items__menu-open"),this.infoToggle=this.podcast.find(".pod-launch__info"),this.events()}var i,a;return i=t,(a=[{key:"events",value:function(){this.menuToggle.on("click",function(){this.menuToggle.parent().toggleClass("toggled-window"),this.menuToggle.toggleClass("toggled-on").attr("aria-expanded",this.menuToggle.hasClass("toggled-on"))}.bind(this)),this.infoToggle.on("click",function(){this.podcast.toggleClass("header-toggle"),this.infoToggle.toggleClass("toggled-on").attr("aria-expanded",this.menuToggle.hasClass("toggled-on"))}.bind(this))}}])&&s(i.prototype,a),t}();function a(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n=function(){function t(s){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=s,this.podcast=e[s].podcast,this.mediaObj=e[s].mediaObj,this.msgMediaObj=e[s].msgMediaObj,this.controls=jQuery(this.mediaObj.controls),this.msgControls=!!this.msgMediaObj&&jQuery(this.msgMediaObj.controls),this.layers=this.controls.prev(".ppjs__layers"),this.media=this.mediaObj.media,this.msgMedia=!!this.msgMediaObj&&this.msgMediaObj.media,this.modalObj=e[s].modal,this.settings=e[s].settings,this.transcript=e[s].episode,this.list=e[s].list,this.props=e[s],this.instance=e[s].instance,this.player=e[s].player,this.isPremium=this.settings.isPremium,this.isLargeScrn=e.isLrgScrn,this.data=e.podcastPlayerData,this.fetched=e[s].fetched,this.timeOut=!1,setTimeout((function(){i.timeOut=!0}),3e3),this.modControlMarkup(),this.modLayersMarkup(),this.plBtn=this.controls.find(".ppjs__playpause-button > button"),this.forBtn=this.controls.find(".ppjs__jump-forward-button > button"),this.bckBtn=this.controls.find(".ppjs__skip-backward-button > button"),this.ttBtn=this.controls.find(".ppjs__episode-excerpt"),this.ssBtn=this.controls.find(".ppjs__share-button > button"),this.pbrBtn=this.controls.find(".ppjs__play-rate-button > button"),this.rateLink=this.controls.find(".prl-item"),this.copylink=this.podcast.find(".ppsocial__copylink"),this.copyField=this.podcast.find("input.pp-copylink"),this.rlbtn=this.podcast.find(".pp-list-btn"),this.msgControls&&(this.msgplBtn=this.msgControls.find(".ppjs__playpause-button > button"),this.msgforBtn=this.msgControls.find(".ppjs__jump-forward-button > button"),this.msgbckBtn=this.msgControls.find(".ppjs__skip-backward-button > button")),this.events()}var s,i;return s=t,(i=[{key:"events",value:function(){var t=this,e=this;jQuery(document).on("click",(function(e){var s=jQuery(e.target),i=s.closest(".toggled-window");jQuery(".toggled-window").removeClass("toggled-window"),i.length&&i.addClass("toggled-window"),s.closest(".ppshare__social").length||(t.copylink.removeClass("pp-link-copied"),t.copyField.hide())})),jQuery(document).on("keyup",(function(t){"Escape"===t.key&&jQuery(".toggled-window").removeClass("toggled-window")})),this.media.addEventListener("loadedmetadata",this.condbtnPauseMedia.bind(this)),this.media.addEventListener("play",this.btnPlayMedia.bind(this)),this.media.addEventListener("playing",this.btnPlayMedia.bind(this)),this.media.addEventListener("pause",this.btnPauseMedia.bind(this)),this.forBtn.on("click",this.forwardMedia.bind(this)),this.bckBtn.on("click",this.skipbackMedia.bind(this)),this.ttBtn.on("click",this.showtranscript.bind(this)),this.ssBtn.on("click",this.showsocialshare.bind(this)),this.pbrBtn.on("click",this.mediaPlayToggle.bind(this)),this.rlbtn.on("click",this.revealList.bind(this)),this.rateLink.on("click",(function(t){t.preventDefault(),e.mediaPlayRate.call(e,this)})),this.podcast.find(".episode-single__close").on("click",this.hidetranscript.bind(this)),this.msgMedia&&(this.msgMedia.addEventListener("loadedmetadata",this.msgcondbtnPauseMedia.bind(this)),this.msgMedia.addEventListener("play",this.msgbtnPlayMedia.bind(this)),this.msgMedia.addEventListener("playing",this.msgbtnPlayMedia.bind(this)),this.msgMedia.addEventListener("pause",this.msgbtnPauseMedia.bind(this))),this.msgControls&&(this.msgplBtn.on("click",this.msgPlayPause.bind(this)),this.msgforBtn.on("click",this.msgForwardMedia.bind(this)),this.msgbckBtn.on("click",this.msgSkipbackMedia.bind(this)))}},{key:"forwardMedia",value:function(){var t,e;e=isNaN(this.media.duration)?30:this.media.duration,t=this.media.currentTime===1/0?0:this.media.currentTime,this.media.setCurrentTime(Math.min(t+30,e)),this.forBtn.blur()}},{key:"skipbackMedia",value:function(){var t;t=this.media.currentTime===1/0?0:this.media.currentTime,this.media.setCurrentTime(Math.max(t-10,0)),this.bckBtn.blur()}},{key:"msgPlayPause",value:function(){this.msgMediaObj.paused?this.msgMediaObj.play():this.msgMediaObj.pause()}},{key:"msgForwardMedia",value:function(){var t,e;e=isNaN(this.msgMedia.duration)?15:this.msgMedia.duration,t=this.msgMedia.currentTime===1/0?0:this.msgMedia.currentTime,this.msgMedia.setCurrentTime(Math.min(t+15,e)),this.msgforBtn.blur()}},{key:"msgSkipbackMedia",value:function(){var t;t=this.msgMedia.currentTime===1/0?0:this.msgMedia.currentTime,this.msgMedia.setCurrentTime(Math.max(t-15,0)),this.msgbckBtn.blur()}},{key:"mediaPlayToggle",value:function(){this.pbrBtn.parent().toggleClass("toggled-window")}},{key:"revealList",value:function(){this.list.slideToggle(400),this.rlbtn.toggleClass("toggled-on"),this.rlbtn.hasClass("toggled-on")||jQuery("html, body").animate({scrollTop:this.player.offset().top},400),this.rlbtn.blur()}},{key:"mediaPlayRate",value:function(t){var s=jQuery(t),i=parseFloat(s.text()),a=s.closest(".ppjs__button");e[this.id].playRate=i,a.length&&a.hasClass("toggled-window")&&(a.find(".pp-rate").text(i),this.media.playbackRate=i,a.removeClass("toggled-window"))}},{key:"btnPlayMedia",value:function(){this.podcast.hasClass("postview")||this.modalObj.modal&&this.modalObj.modal.hasClass("pp-modal-open")&&this.modalObj.returnElem(),this.plBtn.hasClass("playing")||(this.plBtn.removeClass("pause"),this.bufferedPlay())}},{key:"bufferedPlay",value:function(){var t=this;this.plBtn.hasClass("pause")?this.plBtn.removeClass("buffering"):this.media.readyState>=0&&this.media.readyState<4?(this.plBtn.addClass("buffering"),setTimeout((function(){t.bufferedPlay()}),250)):(this.plBtn.removeClass("buffering"),this.plBtn.addClass("playing"))}},{key:"btnPauseMedia",value:function(){this.plBtn.removeClass("playing"),this.plBtn.addClass("pause")}},{key:"showtranscript",value:function(t){t.preventDefault(),this.transcript.slideToggle("fast")}},{key:"hidetranscript",value:function(){this.transcript.slideUp("fast")}},{key:"showsocialshare",value:function(){this.ssBtn.parent().toggleClass("toggled-window"),this.podcast.find(".ppsocial__copylink").removeClass("pp-link-copied")}},{key:"condbtnPauseMedia",value:function(){-1===this.media.rendererName.indexOf("flash")&&this.plBtn.removeClass("playing")}},{key:"msgbtnPlayMedia",value:function(){this.msgplBtn.addClass("playing")}},{key:"msgbtnPauseMedia",value:function(){this.msgplBtn.removeClass("playing")}},{key:"msgcondbtnPauseMedia",value:function(){-1===this.msgMedia.rendererName.indexOf("flash")&&this.msgplBtn.removeClass("playing")}},{key:"modControlMarkup",value:function(){var t,e,s,i,a,n,d,o="pp-podcast-".concat(this.instance),l="ppe-".concat(this.instance,"-1"),r=!!this.data[o]&&this.data[o].rdata,h=!!this.data[o]&&this.data[o].load_info;if(this.data[o]&&(i=(this.data[o][l]?this.data[o][l]:{}).featured),this.mediaObj.isVideo)this.controls.find(".ppjs__time, .ppjs__time-rail").wrapAll('<div class="ppjs__video-timer" />'),this.controls.prepend(this.settings.ppPlayPauseBtn),this.controls.find(".ppjs__fullscreen-button > button").html(this.settings.ppMaxiScrnBtn+this.settings.ppMiniScrnBtn),this.transcript.find(".ppjs__img-wrapper").hide(),i&&this.layers.find(".ppjs__poster").empty().append('<img src="'+i+'"/>').show();else{if(this.controls.find(".ppjs__time").wrapAll('<div class="ppjs__audio-timer" />'),this.controls.find(".ppjs__time-rail").wrap('<div class="ppjs__audio-time-rail" />'),t=jQuery("<div />",{class:"ppjs__audio-controls"}),a=this.transcript.find(".ppjs__img-wrapper").first(),t.html(this.settings.ppAudioControlBtns),this.controls.prepend(t),this.controls.find(".ppjs__head-container").prepend(a),e=!!(e=this.transcript.find(".episode-single__title")).length&&e.html(),s=!(!(s=!!(s=this.transcript.find(".episode-single__description")).length&&s.text().trim())||!s.length)&&s,n=(n=!!h&&h.args.elength)||this.podcast.data("elength"),d=this.podcast.data("eunit"),e&&this.controls.find(".ppjs__episode-title").html(e),n&&s?(d?s.length>n?(s=s.substr(0,n),this.controls.find(".ppjs__more").css("display","inline")):this.controls.find(".ppjs__more").css("display","none"):s.split(/\s+/).length>n?(s=s.split(/\s+/).splice(0,n).join(" "),this.controls.find(".ppjs__more").css("display","inline")):this.controls.find(".ppjs__more").css("display","none"),this.controls.find(".ppjs__excerpt-content").text(s),this.controls.find(".ppjs__episode-excerpt").show()):this.controls.find(".ppjs__episode-excerpt").hide(),this.props.isWide)if(r&&void 0!==r.title&&r.title)this.controls.find(".ppjs__podcast-title").html(r.title);else{var p=this.podcast.find(".pod-items__title");(p=!!p.length&&p.html())&&this.controls.find(".ppjs__podcast-title").html(p)}else if(this.isLargeScrn&&(this.podcast.hasClass("narrow-player")||this.podcast.hasClass("wide-player"))){var c=a.find(".ppjs__img-btn");c.attr("sizes","(max-width: 640px) 100vw, 640px"),void 0!==c.attr("data-sizes")&&c.attr("data-sizes","(max-width: 640px) 100vw, 640px")}jQuery(this.media).find("audio.pp-podcast-episode.hide-audio").remove()}this.modMediaMarkup(),this.msgMediaObj&&(this.msgControls.find(".ppjs__time").wrapAll('<div class="ppjs__audio-timer" />'),this.msgControls.find(".ppjs__time-rail").wrap('<div class="ppjs__audio-time-rail" />'),(t=jQuery("<div />",{class:"ppjs__audio-controls"})).html(this.settings.ppAudioControlBtns),this.msgControls.prepend(t),r&&void 0!==r.msgtext&&this.msgControls.find(".ppjs__episode-title").text(r.msgtext))}},{key:"modMediaMarkup",value:function(){var t=this;if(!1!==e[this.id].fetched){var s,i="pp-podcast-".concat(this.instance),a="ppe-".concat(this.instance,"-1"),n=!!this.data[i]&&this.data[i].rdata;if(this.data[i]&&(s=this.data[i][a]?this.data[i][a]:{}).featured,s&&n){var d=encodeURIComponent(s.link),o=jQuery("<div>").html(s.src).html().replace(/&amp;/g,"&"),l=this.controls.find(".ppshare__social"),r=encodeURIComponent(s.title);if(this.isPremium&&!1!==n&&"feedurl"===n.from){if(void 0!==s.key){var h={ppplayer:n.fprint,ppepisode:s.key},p=jQuery.param(h),c=n.permalink;d=c?c+(c.indexOf("?")<0?"?":"&")+p:d,d=encodeURIComponent(d)}}else if(this.isPremium){var m=jQuery.param({sharedby:"pplayer"});d=d+(d.indexOf("?")<0?"?":"&")+encodeURIComponent(m)}var u="https://www.facebook.com/sharer.php?u="+d,y="https://twitter.com/intent/tweet?url="+d+"&text="+r,f="https://www.linkedin.com/shareArticle?mini=true&url="+d,v="mailto:?subject="+r+"&body=Link:"+d;l.find(".ppsocial__facebook").attr("href",u),l.find(".ppsocial__twitter").attr("href",y),l.find(".ppsocial__linkedin").attr("href",f),l.find(".ppsocial__email").attr("href",v),l.find("input.pp-copylink").val(decodeURIComponent(d)),this.controls.find(".ppshare__download").attr("href",o),this.controls.find(".ppshare__download").attr("download",o)}}else!1===this.timeOut&&setTimeout((function(){t.modMediaMarkup()}),200)}},{key:"modLayersMarkup",value:function(){this.layers.find(".ppjs__overlay-play > .ppjs__overlay-button").html(this.settings.ppPlayCircle),this.layers.find(".ppjs__overlay > .ppjs__overlay-loading").html(this.settings.ppVidLoading)}}])&&a(s.prototype,i),t}();function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function l(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var r=function(){function t(s){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,"listItem",void 0),l(this,"loadMore",void 0),this.id=s,this.podcast=e[s].podcast,this.list=e[s].list,this.episode=e[s].episode,this.player=e[s].player,this.mediaObj=e[s].mediaObj,this.instance=e[s].instance,this.modalObj=e[s].modal,this.singleWrap=e[s].singleWrap,this.data=e.podcastPlayerData,this.msgMediaObj=e[s].msgMediaObj,this.msgControls=!!this.msgMediaObj&&jQuery(this.msgMediaObj.controls),this.msgMedia=!!this.msgMediaObj&&this.msgMediaObj.media,this.msgFreqCounter=0,this.controls=jQuery(this.mediaObj.controls),this.plBtn=this.controls.find(".ppjs__playpause-button > button"),this.prevBtn=this.podcast.find(".pp-prev-btn").attr("disabled",!0),this.nxtBtn=this.podcast.find(".pp-next-btn"),this.copylink=this.podcast.find(".ppsocial__copylink"),this.copyField=this.podcast.find("input.pp-copylink"),this.playingAmsg=!1,this.playAmsg=!1,this.played=!1,this.settings=e[s].settings,this.isPremium=this.settings.isPremium,this.timeOut=!1,setTimeout((function(){i.timeOut=!0}),3e3),this.events()}var s,i;return s=t,(i=[{key:"events",value:function(){var t=this;t.podcast.hasClass("postview")?t.list.on("click",".pod-entry__title a, .pod-entry__excerpt a, .pod-entry__featured",(function(e){var s=jQuery(this);if(!s.hasClass("fetch-post-title")){var i="pp-podcast-".concat(t.instance),a=t.data[i].load_info,n=!!a&&!!a.args&&a.args.hddesc;n=n||!1;var d=!s.hasClass("pod-entry__featured")&&!n||t.mediaObj.isVideo;e.preventDefault(),t.listItem=s.closest(".pod-entry"),t.modPrevBtn(),t.modNextBtn(),t.playModal(d),d&&t.modalObj.modal&&setTimeout((function(){t.modalObj.modal.find(".ppjs__audio-controls button").first().focus()}),200),t.podcast.hasClass("search-opened")&&(t.prevBtn.attr("disabled",!0),t.nxtBtn.attr("disabled",!0))}})):t.list.on("click",".episode-list__entry, .episode-list__search-entry",(function(e){e.preventDefault(),t.listItem=jQuery(this),t.modPrevBtn(),t.modNextBtn(),t.play(),t.podcast.hasClass("search-opened")&&(t.prevBtn.attr("disabled",!0),t.nxtBtn.attr("disabled",!0))})),this.prevBtn.on("click",this.playPreviousEpisode.bind(this)),this.nxtBtn.on("click",this.playNextEpisode.bind(this)),this.msgMedia&&this.msgMedia.addEventListener("ended",this.msgMediaEnded.bind(this)),this.mediaObj.media.addEventListener("ended",this.mediaEnded.bind(this)),this.plBtn.on("click",this.playPauseBtn.bind(this)),this.copylink.on("click",(function(e){e.preventDefault(),t.copyLink()})),jQuery(window).on("load",(function(){t.podcast.parent().hasClass("pp-sticky-player")&&(t.listItem=t.podcast.find(".pod-entry").first(),t.modPrevBtn(),t.modNextBtn(),t.showStickyPlayer())}))}},{key:"playPreviousEpisode",value:function(){if(this.prevBtn.attr("disabled",!0),this.listItem&&!this.listItem.hasClass("episode-list__search-entry")){var t=this.listItem.prev(".episode-list__entry");if(t.length)return this.listItem=t,this.modNextBtn(),this.podcast.hasClass("postview")?this.playModal(this.modalObj.modal&&this.modalObj.modal.hasClass("modal-view")):this.play(),void(this.listItem.prev(".episode-list__entry").length&&this.prevBtn.attr("disabled",!1))}this.prevBtn.blur()}},{key:"modPrevBtn",value:function(){this.prevBtn.attr("disabled",!0),this.listItem&&!this.listItem.hasClass("episode-list__search-entry")&&this.listItem.prev(".episode-list__entry").length&&this.prevBtn.attr("disabled",!1)}},{key:"playNextEpisode",value:function(){if(this.listItem&&!this.listItem.hasClass("episode-list__search-entry")){var t=this.listItem.next(".episode-list__entry");t.length?(this.listItem=t,this.modPrevBtn(),this.podcast.hasClass("postview")?this.playModal(this.modalObj.modal&&this.modalObj.modal.hasClass("modal-view")):this.play(),this.listItem.next(".episode-list__entry").length||this.checkforNextEpisode(!1)):this.checkforNextEpisode(!0)}else{var e=this.list.find(".episode-list__entry").first();e.length&&(this.listItem=e,this.podcast.hasClass("postview")?this.playModal(this.modalObj.modal&&this.modalObj.modal.hasClass("modal-view")):this.play())}this.nxtBtn.blur()}},{key:"checkforNextEpisode",value:function(t){if(this.podcast.hasClass("single-audio"))this.nxtBtn.attr("disabled",!0);else if(this.loadMore||(this.loadMore=e[this.id].loadMore),this.loadMore){this.loadMore.loadEpisodes();var s=this.listItem.next(".episode-list__entry");s.length?t&&(this.listItem=s,this.modPrevBtn(),this.play()):this.nxtBtn.attr("disabled",!0)}}},{key:"modNextBtn",value:function(){this.nxtBtn.is(":disabled")&&this.listItem&&!this.listItem.hasClass("episode-list__search-entry")&&this.listItem.next(".episode-list__entry").length&&this.nxtBtn.attr("disabled",!1),this.listItem&&!this.listItem.hasClass("episode-list__search-entry")&&(this.listItem.next(".episode-list__entry").length||this.checkforNextEpisode())}},{key:"common",value:function(){var t,s,i,a,n,d,o,l,r="pp-podcast-".concat(this.instance),h=!!this.data[r]&&this.data[r].rdata,p=!!this.data[r]&&this.data[r].load_info,c=(!!p&&p.args,this.listItem.attr("id")),m=e[this.id].playRate||1,u=this.controls.find(".ppshare__social");if(0<(t=this.list.find(".activeEpisode")).length&&t.removeClass("activeEpisode media-playing"),this.msgMediaObj&&(this.msgMediaObj.paused||this.msgMediaObj.pause(),this.msgMediaObj.currentTime=0),this.played=!0,this.playingAmsg=!1,this.player.removeClass("msg-playing"),s=this.listItem.hasClass("episode-list__search-entry")?this.data.search[c]:this.data[r][c],i=encodeURIComponent(s.link),a=encodeURIComponent(s.title),n=jQuery("<div>").html(s.src).html().replace(/&amp;/g,"&"),this.isPremium&&!1!==h&&"feedurl"===h.from){if(void 0!==s.key){var y={ppplayer:h.fprint,ppepisode:s.key},f=jQuery.param(y),v=h.permalink;i=v?v+(v.indexOf("?")<0?"?":"&")+f:i,i=encodeURIComponent(i)}}else if(this.isPremium){var g=jQuery.param({sharedby:"pplayer"});i=i+(i.indexOf("?")<0?"?":"&")+encodeURIComponent(g)}var b="https://www.facebook.com/sharer.php?u="+i,_="https://twitter.com/intent/tweet?url="+i+"&text="+a,j="https://www.linkedin.com/shareArticle?mini=true&url="+i,w="mailto:?subject="+a+"&body=Link:"+i;return this.listItem.addClass("activeEpisode media-playing"),this.episode.find(".episode-single__title").html(s.title),this.episode.find(".episode-single__author > .single-author").html(s.author),this.controls.find(".ppjs__episode-title").html(s.title),this.episode.find(".episode-single__description").html(s.description),u.find(".ppsocial__facebook").attr("href",b),u.find(".ppsocial__twitter").attr("href",_),u.find(".ppsocial__linkedin").attr("href",j),u.find(".ppsocial__email").attr("href",w),u.find("input.pp-copylink").val(decodeURIComponent(i)),this.controls.find(".ppshare__download").attr("href",n),this.controls.find(".ppshare__download").attr("download",n),o=this.podcast.data("elength"),l=this.podcast.data("eunit"),o&&((d=!!(d=this.episode.find(".episode-single__description")).length&&d.text().trim())&&d.length?(l?d.length>o?(d=d.substr(0,o),this.controls.find(".ppjs__more").css("display","inline")):this.controls.find(".ppjs__more").css("display","none"):d.split(/\s+/).length>o?(d=d.split(/\s+/).splice(0,o).join(" "),this.controls.find(".ppjs__more").css("display","inline")):this.controls.find(".ppjs__more").css("display","none"),this.controls.find(".ppjs__excerpt-content").text(d),this.controls.find(".ppjs__episode-excerpt").show()):this.controls.find(".ppjs__episode-excerpt").hide()),this.mediaObj.setSrc(n),this.mediaObj.load(),this.mediaObj.media.playbackRate=m,this.playMessage(),!0}},{key:"btnImage",value:function(){var t="pp-podcast-".concat(this.instance),e=this.listItem.attr("id"),s=this.player.find(".ppjs__img-btn").attr("data-src"),i=this.listItem.hasClass("episode-list__search-entry")?this.data.search[e]:this.data[t][e],a=i.title,n=i.featured,o=i.fset;n?(this.player.find(".ppjs__img-btn").attr("srcset",o).attr("src",n).attr("alt",a).closest(".ppjs__img-wrapper").removeClass("noimg"),"undefined"!==d(s)&&!1!==s&&this.player.find(".ppjs__img-btn").attr("data-srcset",o).attr("data-src",n),this.modalObj&&this.modalObj.modal.find(".ppjs__img-btn").attr("scrset",o).attr("src",n).attr("alt",a).closest(".ppjs__img-wrapper").removeClass("noimg")):(this.player.find(".ppjs__img-wrapper").addClass("noimg"),this.modalObj&&this.modalObj.modal.find(".ppjs__img-wrapper").addClass("noimg"))}},{key:"playPauseBtn",value:function(){if(!1!==this.played)this.mediaObj.paused?(this.mediaObj.play(),this.listItem&&this.listItem.addClass("activeEpisode media-playing")):(this.mediaObj.pause(),this.listItem&&this.listItem.removeClass("activeEpisode media-playing"));else{if(this.played=!0,this.listItem=this.list.find(".episode-list__entry").first(),!this.listItem.length){var t="ppe-".concat(this.instance,"-1");this.listItem=jQuery("<div />",{class:"episode-list__entry",id:t})}this.play()}}},{key:"play",value:function(){var t=this;if(this.listItem.hasClass("activeEpisode"))return this.listItem.removeClass("activeEpisode"),this.mediaObj.pause(),this.player.removeClass("msg-playing"),this.playingAmsg=!1,void(this.msgMediaObj&&(this.msgMediaObj.pause(),this.msgMediaObj.currentTime=0));this.modalObj.modal&&this.modalObj.modal.hasClass("pp-modal-open")&&this.modalObj.returnElem(),!1!==e[this.id].fetched?(this.common(),this.btnImage(),this.playingAmsg||this.mediaObj.play(),this.podcast.hasClass("wide-player")?jQuery("html, body").animate({scrollTop:this.player.offset().top-200},400):jQuery("html, body").animate({scrollTop:this.player.offset().top},400)):!1===this.timeOut&&setTimeout((function(){t.play()}),200)}},{key:"playModal",value:function(t){var s=this;this.modalObj&&(this.listItem.hasClass("activeEpisode")?t?(this.modalObj.modal.removeClass("inline-view").addClass("modal-view"),this.modalObj.scrollDisable(),this.playingAmsg||(this.modalObj.modal.find(".episode-primary__title").find(".episode-single__title").html(this.episode.find(".episode-single__title").html()),this.mediaObj.play(),this.modalObj.modal.removeClass("media-paused"),this.listItem.addClass("media-playing"))):this.msgMediaObj&&this.playingAmsg?this.msgMediaObj.paused?(this.msgMediaObj.play(),this.modalObj.modal.removeClass("media-paused"),this.listItem.addClass("media-playing")):(this.msgMediaObj.pause(),this.modalObj.modal.addClass("media-paused"),this.listItem.removeClass("media-playing")):this.mediaObj.paused?(this.mediaObj.play(),this.modalObj.modal.removeClass("media-paused"),this.listItem.addClass("media-playing")):(this.mediaObj.pause(),this.modalObj.modal.addClass("media-paused"),this.listItem.removeClass("media-playing")):!1!==e[this.id].fetched?(this.common(),this.singleWrap.hasClass("activePodcast")?t&&(this.modalObj.modal.find(".episode-primary__title").find(".episode-single__title").html(this.episode.find(".episode-single__title").html()),this.modalObj.modal.removeClass("inline-view").addClass("modal-view"),this.modalObj.scrollDisable()):(this.modalObj.modal.hasClass("pp-modal-open")&&this.modalObj.returnElem(),this.modalObj.create(this.singleWrap,this.mediaObj,this.msgMediaObj,t),this.singleWrap.addClass("activePodcast")),this.playingAmsg||this.mediaObj.play(),this.modalObj.modal.removeClass("media-paused"),this.btnImage()):!1===this.timeOut&&setTimeout((function(){s.playModal()}),200))}},{key:"showStickyPlayer",value:function(){var t=this;this.modalObj&&(!1!==e[this.id].fetched?(this.common(),this.singleWrap.hasClass("activePodcast")||(this.modalObj.modal.hasClass("pp-modal-open")&&this.modalObj.returnElem(),this.modalObj.create(this.singleWrap,this.mediaObj,this.msgMediaObj,!1),this.singleWrap.addClass("activePodcast"))):!1===this.timeOut&&setTimeout((function(){t.showStickyPlayer()}),200))}},{key:"playMessage",value:function(){var t="pp-podcast-".concat(this.instance),e=!!this.data[t]&&this.data[t].rdata;if(e&&void 0!==e.audiomsg)if(e.playfreq<=this.msgFreqCounter||!1===this.played){if(this.msgFreqCounter=0,"start"===e.msgstart)this.playingAmsg=!0,this.player.addClass("msg-playing"),this.msgMediaObj&&this.msgMediaObj.play();else if("end"===e.msgstart)this.playAmsg=!0;else if("custom"===e.msgstart){var s=60*e.msgtime[0]*60+60*e.msgtime[1]+e.msgtime[2];this.deferredPlay(s)}}else this.msgFreqCounter++,this.playingAmsg=!1}},{key:"deferredPlay",value:function(t){var e=this;if(t){var s=this.mediaObj.currentTime;s&&s>=t?(this.playingAmsg=!0,this.mediaObj.pause(),this.msgMediaObj&&this.msgMediaObj.play(),this.player.addClass("msg-playing")):setTimeout((function(){e.deferredPlay(t)}),1e3)}}},{key:"mediaEnded",value:function(){!0===this.playAmsg?(this.playingAmsg=!1,this.player.addClass("msg-playing"),this.msgMediaObj&&this.msgMediaObj.play()):this.listItem&&!this.listItem.hasClass("episode-list__search-entry")&&this.playNextEpisode()}},{key:"msgMediaEnded",value:function(){!0===this.playingAmsg?(this.player.removeClass("msg-playing"),this.playingAmsg=!1,this.mediaObj.play()):!0===this.playAmsg&&this.listItem&&!this.listItem.hasClass("episode-list__search-entry")&&this.playNextEpisode()}},{key:"copyLink",value:function(){this.copyField.length&&(this.copyField.show(),this.copyField[0].select(),this.copyField[0].setSelectionRange(0,99999),document.execCommand("copy"),this.copylink.addClass("pp-link-copied"))}}])&&o(s.prototype,i),t}();function h(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var p=function(){function t(s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=s,this.podcast=e[s].podcast,this.settings=e[s].settings,this.instance=e[s].instance,this.episodes=e[s].episodes,this.fetched=e[s].fetched,this.isStyleSupport=e.isStyleSupport,this.data=e.podcastPlayerData,this.loadbtn=this.podcast.find(".episode-list__load-more"),this.events()}var s,i;return s=t,(i=[{key:"events",value:function(){this.preLoadEpisodes(),this.loadbtn.on("click",this.loadEpisodes.bind(this))}},{key:"preLoadEpisodes",value:function(){var t="pp-podcast-".concat(this.instance),s=!!this.data[t]&&this.data[t].rdata.from,i=!!this.data[t]&&this.data[t].load_info,a=!!i&&i.loaded;s&&"link"!==s?0!=a?e[this.id].fetched=!0:this.fetchEpisodes():s&&this.fetchMediaURL()}},{key:"loadEpisodes",value:function(){var t="pp-podcast-".concat(this.instance);if(this.data[t]){var e=this.episodes.find(".episode-list__entry").first(),s=this.data[t].rdata.from,i=this.data[t].load_info,a=this.data[t].rdata.elen,n=this.data[t].rdata.eunit,d=Math.min(i.displayed+i.step,i.loaded),o=i.displayed+1,l=jQuery("<div />"),r=e.find(".pod-entry__image"),h=r.length?r.attr("sizes"):"",p=!1,c="";for("posts"===s&&(c="fetch-post-title");o<=d;o++){var m="ppe-".concat(this.instance,"-").concat(o),u=this.data[t][m];if(p=p||m,void 0!==u){var y=u.title,f=u.description,v=u.author,g=u.date,b=u.link,_=u.featured,j=u.fset,w=jQuery("<a />",{href:b,class:c}).html(y),C=jQuery("<a />",{href:b,class:c}).html("[...]"),O=jQuery("<div />",{class:"pod-entry__title"}).html(w),k=jQuery("<div />",{class:"pod-entry__date"}).text(g),M=jQuery("<div />",{class:"pod-entry__author"}).html(v),x=void 0;if(this.podcast.hasClass("postview")){var E=i.args.display,P=f?jQuery(f).text():"",T=jQuery("<div />",{class:"pod-entry__play"}).html(this.settings.ppPlayCircle+this.settings.ppPauseBtn),S=void 0,B="";if(S=E&&this.isStyleSupport(E,"playbtn")?"":(S=_?jQuery("<img />",{class:"pod-entry__image",src:_,srcset:j,sizes:h}):"")?'<div class="pod-entry__thumb">'.concat(S[0].outerHTML,"</div>"):"",E&&this.isStyleSupport(E,"excerpt")){var L,Q=(L=n?P?P.substr(0,a):"":P?P.split(/\s+/).splice(0,a).join(" "):"")?jQuery("<div />",{class:"pod-entry__excerpt"}).html(L+C[0].outerHTML):"";B=Q?Q[0].outerHTML:""}x='\n\t\t\t\t\t<div id="'.concat(m,'" class="episode-list__entry pod-entry" data-search-term="').concat(y.toLowerCase(),'">\n\t\t\t\t\t\t<div class="pod-entry__wrapper">\n\t\t\t\t\t\t\t<div class="pod-entry__featured">\n\t\t\t\t\t\t\t\t').concat(T[0].outerHTML,"\n\t\t\t\t\t\t\t\t").concat(S,'\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="pod-entry__content">\n\t\t\t\t\t\t\t\t').concat(O[0].outerHTML).concat(B).concat(k[0].outerHTML).concat(M[0].outerHTML,"\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t")}else x='\n\t\t\t\t\t<div id="'.concat(m,'" class="episode-list__entry pod-entry" data-search-term="').concat(y.toLowerCase(),'">\n\t\t\t\t\t\t<div class="pod-entry__content">\n\t\t\t\t\t\t\t').concat(O[0].outerHTML).concat(k[0].outerHTML).concat(M[0].outerHTML,"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t");l.append(jQuery(x))}}if(this.loadbtn.parent().before(l.html()),p){var I=this.podcast.find("#"+p);I.length&&(I.find("a").first().focus(),this.podcast.hasClass("postview")&&jQuery("html, body").animate({scrollTop:I.offset().top-150},400))}i.displayed=d,this.fetchEpisodes()}}},{key:"fetchEpisodes",value:function(){var t="pp-podcast-".concat(this.instance),e=this.data[t].rdata;"feedurl"===e.from?this.fetchFromFeed():"posts"===e.from&&this.fetchFromPosts()}},{key:"fetchMediaURL",value:function(){var t=this,s="pp-podcast-".concat(this.instance),i="ppe-".concat(this.instance,"-1"),a=this.data[s][i],n=this.data.ajax_info,d=a.src;if(0!=d.indexOf("http://")&&0!=d.indexOf("https://")){var o={action:"pp_fetch_media_url",security:n.security,src:d};jQuery.ajax({url:n.ajaxurl,data:o,type:"POST",timeout:4e3,success:function(s){var i=jQuery.parseJSON(s);a.src===a.link&&(a.link=i),a.src=i,e[t.id].fetched=!0},error:function(){a.src="#",a.link="#"}})}else e[this.id].fetched=!0}},{key:"fetchFromFeed",value:function(){var t=this,s="pp-podcast-".concat(this.instance),i=this.data[s].load_info,a=this.data.ajax_info,n=i.step;e[this.id].fetched||(n*=2);var d={action:"pp_fetch_episodes",security:a.security,instance:this.instance,loaded:i.loaded,maxItems:i.maxItems,feedUrl:i.src,step:n,sortby:i.sortby,filterby:i.filterby,args:i.args};i.loaded>=i.maxItems?i.displayed>=i.loaded&&this.loadbtn.slideUp("slow"):jQuery.ajax({url:a.ajaxurl,data:d,type:"POST",timeout:4e3,success:function(a){var n=jQuery.parseJSON(a);i.loaded=n.loaded,jQuery.extend(!0,t.data[s],n.episodes),e[t.id].fetched=!0},error:function(){t.loadbtn.hide()}})}},{key:"fetchFromPosts",value:function(){var t=this,s="pp-podcast-".concat(this.instance),i=this.data[s].load_info,a=this.data.ajax_info,n=jQuery.extend(!0,{},i.args);e[this.id].fetched||(n.number=2*n.number);var d={action:"pp_fetch_posts",security:a.security,instance:this.instance,offset:i.offset,loaded:i.loaded,args:n,ids:i.ids};i.offset&&0===i.offset||i.ids&&Array.isArray(i.ids)&&i.loaded>=i.ids.length?this.loadbtn.slideUp("slow"):jQuery.ajax({url:a.ajaxurl,data:d,type:"POST",timeout:4e3,success:function(a){var n=jQuery.parseJSON(a);jQuery.isEmptyObject(n)?(i.offset=0,t.loadbtn.slideUp("slow")):(i.loaded=n.loaded,i.ids=n.ids,jQuery.extend(!0,t.data[s],n.episodes),i.offset&&(i.offset+=i.step)),e[t.id].fetched=!0},error:function(){t.loadbtn.hide()}})}}])&&h(s.prototype,i),t}();function c(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function m(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var u=function(){function t(s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,"isSrchOpen",!1),m(this,"localTimeOut",null),m(this,"serverTimeOut",null),m(this,"hasLoading",!1),m(this,"prevSearchTerm",""),this.podcast=e[s].podcast,this.instance=e[s].instance,this.isStyleSupport=e.isStyleSupport,this.data=e.podcastPlayerData,this.list=e[s].list,this.episodes=e[s].episodes,this.settings=e[s].settings,this.loadbtn=this.podcast.find(".episode-list__load-more"),this.prevBtn=this.podcast.find(".pp-prev-btn"),this.nextBtn=this.podcast.find(".pp-next-btn"),this.searchBox=this.list.find(".episode-list__search input"),this.searchResults=this.list.find(".episode-search"),this.searchClose=this.list.find(".episode-list__clear-search"),this.events()}var s,i;return s=t,(i=[{key:"events",value:function(){this.searchBox.on("keyup",this.initSearch.bind(this)),this.searchClose.on("click",this.clearSearch.bind(this))}},{key:"initSearch",value:function(){var t="";!1===this.isSrchOpen&&(this.podcast.addClass("search-opened"),this.searchResults.addClass("toggled-on"),this.loadbtn.hide(),this.searchClose.show(),this.isSrchOpen=!0),clearTimeout(this.localTimeOut),this.localTimeOut=setTimeout(function(){(t=this.searchBox.val().trim().toLowerCase())&&this.filterEpisodes(t)}.bind(this),100),clearTimeout(this.serverTimeOut),this.serverTimeOut=setTimeout(function(){if(t){if(this.prevSearchTerm===t)return;this.liveSearch(t)}else this.clearSearch()}.bind(this),500)}},{key:"filterEpisodes",value:function(t){this.episodes.find(".episode-list__entry").each((function(){jQuery(this).filter("[data-search-term *= "+t+"]").length>0||t.length<1?jQuery(this).show():jQuery(this).hide()}))}},{key:"liveSearch",value:function(t){if(!1===this.hasLoading){var e=jQuery("<div />",{class:"episode-search__loading"}).html(this.settings.ppVidLoading);this.searchResults.html(e),this.hasLoading=!0}this.fetchResults(t)}},{key:"fetchResults",value:function(t){var e="pp-podcast-".concat(this.instance),s=this.data[e].rdata;"feedurl"===s.from?this.fetchFromFeed(t):"posts"===s.from&&this.fetchFromPosts(t)}},{key:"fetchFromFeed",value:function(t){var e=this,s="pp-podcast-".concat(this.instance),i=this.data[s].load_info,a=this.data.ajax_info,n={action:"pp_search_episodes",security:a.security,instance:"s",loaded:i.displayed,displayed:i.displayed,maxItems:i.maxItems,feedUrl:i.src,sortby:i.sortby,filterby:i.filterby,search:t,args:i.args};i.displayed>=i.maxItems?this.flushSearchResults():jQuery.ajax({url:a.ajaxurl,data:n,type:"POST",timeout:4e3,success:function(t){var s=jQuery.parseJSON(t);jQuery.isEmptyObject(s)?e.flushSearchResults():(e.data.search=s.episodes,e.showSearchResults(s.episodes))},error:function(t,s,i){e.flushSearchResults(),console.log(i)}})}},{key:"fetchFromPosts",value:function(t){var e=this,s="pp-podcast-".concat(this.instance),i=this.data[s].load_info,a=this.data.ajax_info,n={action:"pp_search_posts",security:a.security,offset:i.displayed,displayed:i.displayed,args:i.args,instance:"s",search:t,ids:i.ids};jQuery.ajax({url:a.ajaxurl,data:n,type:"POST",timeout:4e3,success:function(t){var s=jQuery.parseJSON(t);jQuery.isEmptyObject(s)?e.flushSearchResults():(e.data.search=s.episodes,e.showSearchResults(s.episodes))},error:function(){e.flushSearchResults()}})}},{key:"clearSearch",value:function(){var t="pp-podcast-".concat(this.instance),e=this.data[t].load_info;this.searchBox.val(""),this.prevSearchTerm="",this.isSrchOpen=!1,this.podcast.removeClass("search-opened"),this.searchResults.removeClass("toggled-on"),this.searchClose.hide(),this.episodes.find(".episode-list__entry").show(),this.flushSearchResults(),e.displayed<e.loaded&&(this.loadbtn.show(),this.nextBtn.attr("disabled",!1))}},{key:"flushSearchResults",value:function(){this.searchResults.empty(),this.hasLoading=!1}},{key:"showSearchResults",value:function(t){var e="pp-podcast-".concat(this.instance),s=this.data[e].rdata.from,i=this.data[e].load_info,a=Object.getOwnPropertyNames(t),n=a.length-1,d=this.data[e].rdata.elen,o=this.data[e].rdata.eunit,l=0,r=jQuery("<div />"),h="";for("posts"===s&&(h="fetch-post-title");l<=n;l++){var p=a[l],c=t[p],m=c.title,u=c.description,y=c.author,f=c.date,v=c.link,g=c.featured;g||(g=(g=i.args.imgurl)||"");var b=jQuery("<a />",{href:v,class:h}).html(m),_=jQuery("<div />",{class:"pod-entry__title"}).html(b),j=jQuery("<div />",{class:"pod-entry__date"}).text(f),w=jQuery("<div />",{class:"pod-entry__author"}).html(y),C=void 0;if(this.podcast.hasClass("postview")){var O=i.args.display,k=u?jQuery(u).text():"",M=jQuery("<div />",{class:"pod-entry__play"}).html(this.settings.ppPlayCircle+this.settings.ppPauseBtn),x=void 0,E="";if(x=O&&this.isStyleSupport(O,"playbtn")?"":(x=g?jQuery("<img />",{class:"pod-entry__image",src:g}):"")?'<div class="pod-entry__thumb">'.concat(x[0].outerHTML,"</div>"):"",O&&this.isStyleSupport(O,"excerpt")){var P,T=(P=o?k?k.substr(0,d):"":k?k.split(/\s+/).splice(0,d).join(" "):"")?jQuery("<div />",{class:"pod-entry__excerpt"}).text(P+"..."):"";E=T?T[0].outerHTML:""}C='\n\t\t\t\t<div id="'.concat(p,'" class="episode-list__search-entry pod-entry" data-search-term="').concat(m.toLowerCase(),'">\n\t\t\t\t\t<div class="pod-entry__wrapper">\n\t\t\t\t\t\t<div class="pod-entry__featured">\n\t\t\t\t\t\t\t').concat(M[0].outerHTML,"\n\t\t\t\t\t\t\t").concat(x,'\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="pod-entry__content">\n\t\t\t\t\t\t\t').concat(_[0].outerHTML).concat(E).concat(j[0].outerHTML).concat(w[0].outerHTML,"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t")}else C='\n\t\t\t\t<div id="'.concat(p,'" class="episode-list__search-entry pod-entry" data-search-term="').concat(m.toLowerCase(),'">\n\t\t\t\t\t<div class="pod-entry__content">\n\t\t\t\t\t\t').concat(_[0].outerHTML).concat(j[0].outerHTML).concat(w[0].outerHTML,"\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t");r.append(jQuery(C)),this.searchResults.html(r.html()),this.hasLoading=!1}}}])&&c(s.prototype,i),t}();function y(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function f(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var v=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,"width",void 0),f(this,"resizeTimeout",null),this.id=e,this.playerStyleUpdate(),this.managerHeader(),this.mediaElements(),this.entryEpisodes(),this.loadMore(),this.searchEpisodes(),this.events()}var s,a;return s=t,(a=[{key:"events",value:function(){var t=this;clearTimeout(this.resizeTimeout),jQuery(window).on("resize",(function(){t.resizeTimeout=setTimeout(t.playerStyleUpdate.bind(t),100)}))}},{key:"playerStyleUpdate",value:function(){var t=e[this.id].podcast,s="";this.width=t.width(),window.matchMedia("(max-width: 640px)").matches?e.isLrgScrn=!1:e.isLrgScrn=!0,t.removeClass("wider-player wide-player narrow-player medium-player"),e[this.id].isWide=!1,this.width>720?(s="wider-player medium-player wide-player",e[this.id].isWide=!0):this.width>640?(s="medium-player wide-player",e[this.id].isWide=!0):this.width>450?(s="wide-player",e[this.id].isWide=!0):this.width>280&&(s="narrow-player"),t.addClass(s)}},{key:"managerHeader",value:function(){new i(this.id)}},{key:"mediaElements",value:function(){new n(this.id)}},{key:"entryEpisodes",value:function(){new r(this.id)}},{key:"loadMore",value:function(){e[this.id].loadMore=new p(this.id)}},{key:"searchEpisodes",value:function(){new u(this.id)}}])&&y(s.prototype,a),t}();function g(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var b=function(){function t(){var e,s;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),s=void 0,(e="modal")in this?Object.defineProperty(this,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):this[e]=s,this.settings=window.ppmejsSettings||{},this.mediaObj=!1,this.msgMediaObj=!1,this.bodyScrollDisabled=!1,this.scrollPosition=0,this.scrollingElem=document.scrollingElement||document.documentElement||document.body,this.setup(),this.events(),this.pauseMedia=this.mediaPause.bind(this),this.playMedia=this.mediaPlay.bind(this)}var e,s;return e=t,(s=[{key:"setup",value:function(){var t=this.settings,e=t.ppClose,s=t.ppMaxiScrnBtn,i=t.ppMiniScrnBtn,a=t.ppCloseBtnText,n=jQuery("<button />",{class:"pp-modal-close"}).html(a+e+s+i),d='\n\t\t<div id="pp-modal-window" class="pp-modal-window">\n\t\t\t<div class="pp-modal-wrapper"></div>\n\t\t\t'.concat(n[0].outerHTML,"\n\t\t</div>");jQuery("body").append(d),this.modal=jQuery("#pp-modal-window")}},{key:"events",value:function(){var t=this;this.modal.on("click",".pp-modal-close",(function(){t.modal.hasClass("media-paused")?t.modalClose():t.modal.hasClass("modal-view")?t.mediaObj.isVideo?t.modalClose():(t.modal.removeClass("modal-view").addClass("inline-view"),t.scrollEnable()):t.modal.hasClass("inline-view")&&(t.modal.removeClass("inline-view").addClass("modal-view"),t.scrollDisable())})),jQuery(document).on("keyup",(function(e){"Escape"===e.key&&(t.modal.hasClass("media-paused")?t.modalClose():t.modal.hasClass("modal-view")&&!t.mediaObj.isVideo&&(t.modal.removeClass("modal-view").addClass("inline-view"),t.scrollEnable()))})),this.modal.on("click",(function(e){var s=jQuery(e.target);t.modal.hasClass("modal-view")&&(s.closest(".pp-modal-wrapper").length||s.closest(".pp-modal-close").length||(t.modal.hasClass("media-paused")||t.mediaObj.isVideo?t.modalClose():(t.modal.removeClass("modal-view").addClass("inline-view"),t.scrollEnable())))}))}},{key:"create",value:function(t,e,s,i){var a=jQuery("<div />",{id:"pp-modal-placeholder"}),n=this.modal.find(".pp-modal-wrapper"),d=t.closest(".pp-podcast"),o=d.attr("id").replace("pp-podcast-",""),l=this;a.insertBefore(t),n.empty().append(t),n.children().wrapAll('<div class="modal-'+o+'">'),i?(this.modal.addClass("modal-view pp-modal-open"),this.scrollDisable()):this.modal.addClass("inline-view pp-modal-open"),jQuery.each(["light-accent","light-color","hide-share","hide-download","hide-social"],(function(t,e){d.hasClass(e)&&l.modal.addClass(e)})),this.mediaObj&&this.mediaObj.pause(),this.mediaObj=e,this.msgMediaObj=s,this.mediaObj.media.addEventListener("ended",this.pauseMedia),this.mediaObj.media.addEventListener("pause",this.pauseMedia),this.mediaObj.media.addEventListener("play",this.playMedia),this.mediaObj.media.addEventListener("playing",this.playMedia),this.msgMediaObj&&(this.msgMediaObj.media.addEventListener("ended",this.pauseMedia),this.msgMediaObj.media.addEventListener("pause",this.pauseMedia),this.msgMediaObj.media.addEventListener("play",this.playMedia),this.msgMediaObj.media.addEventListener("playing",this.playMedia))}},{key:"mediaPause",value:function(){this.modal.addClass("media-paused"),jQuery("#pp-modal-placeholder").parent().find(".activeEpisode").removeClass("media-playing")}},{key:"mediaPlay",value:function(){this.modal.removeClass("media-paused"),jQuery("#pp-modal-placeholder").parent().find(".activeEpisode").addClass("media-playing")}},{key:"modalClose",value:function(){this.returnElem(),this.modal.removeClass().addClass("pp-modal-window"),this.scrollEnable(),this.mediaObj&&(this.mediaObj.pause(),this.mediaObj=!1),this.msgMediaObj&&(this.msgMediaObj.pause(),this.msgMediaObj.currentTime=0,this.msgMediaObj=!1)}},{key:"returnElem",value:function(){var t=this.modal.find(".pp-modal-wrapper"),e=t.find(".pp-podcast__single"),s=jQuery("#pp-modal-placeholder");this.mediaObj.media.removeEventListener("ended",this.pauseMedia),this.mediaObj.media.removeEventListener("pause",this.pauseMedia),this.mediaObj.media.removeEventListener("play",this.pauseMedia),this.mediaObj.media.removeEventListener("playing",this.pauseMedia),this.msgMediaObj&&(this.msgMediaObj.media.removeEventListener("ended",this.pauseMedia),this.msgMediaObj.media.removeEventListener("pause",this.pauseMedia),this.msgMediaObj.media.removeEventListener("play",this.playMedia),this.msgMediaObj.media.removeEventListener("playing",this.playMedia)),e.length&&(e.removeClass("activePodcast"),s.length&&e.insertAfter(s)),s.length&&(s.parent().find(".activeEpisode").removeClass("activeEpisode media-playing"),s.remove()),this.modal.removeClass().addClass("pp-modal-window"),t.empty()}},{key:"scrollDisable",value:function(){var t=this;this.bodyScrollDisabled||(this.scrollPosition=this.scrollingElem.scrollTop,this.bodyScrollDisabled=!0,setTimeout((function(){t.scrollingElem.scrollTop=0,t.scrollingElem.classList.add("no-scroll")}),250))}},{key:"scrollEnable",value:function(){this.bodyScrollDisabled&&(this.scrollingElem.classList.remove("no-scroll"),this.scrollingElem.scrollTop=this.scrollPosition,this.bodyScrollDisabled=!1)}}])&&g(e.prototype,s),t}();!function(t){var s=window.ppmejsSettings||{},i=s.isPremium?new b:"";function a(a){if("playerAdded"===a.animationName&&t(a.target).hasClass("pp-podcast")&&!t(a.target).hasClass("pp-podcast-added")){var n=t(a.target);n.find(".pp-podcast").remove();var d=n.attr("id"),o=new MediaElementPlayer(d+"-player",s),l=n.find(".pod-content__list"),r=n.find(".pod-content__episode"),h=l.find(".episode-list__wrapper"),p=r.find(".episode-single__wrapper"),c=n.find(".pp-podcast__single"),m=n.find(".pp-podcast__player");e[d]={podcast:n,mediaObj:o,settings:s,list:l,episode:r,episodes:h,single:p,player:m,modal:i,singleWrap:c,instance:d.replace("pp-podcast-","")},n.addClass("pp-podcast-added"),new v(d)}}document.addEventListener("animationstart",a,!1),document.addEventListener("webkitAnimationStart",a,!1)}(jQuery)}();